# Laser Scan Matcher Configuration
# This node estimates robot motion using laser scan matching (ICP-based approach)

laser_scan_matcher:
  ros__parameters:
    # ===== TOPIC CONFIGURATION =====
    publish_odom_topic: /odom_laser        # Output odometry topic (NO TF publishing)
    subscribe_scan_topic: /scan            # Input laser scan topic
    
    # ===== FRAME CONFIGURATION =====
    base_frame: base_footprint             # Robot base frame
    odom_frame: odom                       # Odometry frame
    
    # ===== SCAN PROCESSING PARAMETERS =====
    max_range: 8.0                         # Maximum laser range to consider (meters)
    min_range: 0.2                         # Minimum laser range to consider (meters)
    
    # ===== SCAN MATCHING ALGORITHM =====
    max_iterations: 50                     # Maximum ICP iterations
    convergence_threshold: 0.001           # Convergence threshold for ICP
    max_correspondence_distance: 0.3       # Maximum distance for point correspondences (meters)
    outlier_threshold: 0.5                 # Threshold for rejecting bad matches
    
    # ===== MOTION CONSTRAINTS =====
    # These parameters limit the maximum motion between scans to reject outliers
    max_linear_velocity: 2.0               # Maximum expected linear velocity (m/s)
    max_angular_velocity: 1.0              # Maximum expected angular velocity (rad/s)
    
    # ===== COVARIANCE TUNING =====
    # These affect the uncertainty estimates published with odometry
    # Higher values = less trust in laser odometry, lower values = more trust
    
    position_covariance_xx: 0.1            # X position variance (m²)
    position_covariance_yy: 0.1            # Y position variance (m²) 
    orientation_covariance_yaw: 0.05       # Yaw angle variance (rad²)
    
    velocity_covariance_x: 0.05            # X velocity variance (m²/s²)
    velocity_covariance_y: 0.05            # Y velocity variance (m²/s²)
    velocity_covariance_yaw: 0.03          # Angular velocity variance (rad²/s²)